<!DOCTYPE html>
<html>

<head>
    <title>COM480 Momo</title>
    <link rel="stylesheet" href="style.css">

    <!-- Resources -->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/map.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/worldLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/percent.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/flow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
</head>

<body>
    <h1>Visualize Nobel prize winners on the world map</h1>

    <h2>World Map</h2>

    <!-- Filter Panel: time & categories -->
    <div class="control-panel compact">
        <!-- Compact Timeline -->
        <div class="timeline-container">
            <h3>Timeline</h3>
            <div class="slider-wrapper">
                <input type="range" id="timeline-slider" min="1900" max="2024" value="2024" class="slider">
                <div id="current-year">2024</div>
            </div>
        </div>

        <!-- Dropdown Category Filter -->
        <div class="category-filter">
            <h3>Category</h3>
            <div class="dropdown">
                <button class="dropdown-toggle">All Categories â–¼</button>
                <div class="dropdown-menu">
                    <div class="dropdown-item" data-category="all">All Categories</div>
                    <div class="dropdown-item" data-category="physics">Physics</div>
                    <div class="dropdown-item" data-category="chemistry">Chemistry</div>
                    <div class="dropdown-item" data-category="literature">Literature</div>
                    <div class="dropdown-item" data-category="peace">Peace</div>
                </div>
            </div>
        </div>
    </div>

    <script src="src/filter_data.js"></script>

    <!-- Chart container must come FIRST -->
    <div id="chartdiv"></div>

    <script src="src/world_map.js"></script>

    <!-- Charts by Country -->
    <h2>Explore Winners by Country</h2>

    <div class="chart-row">
        <!-- Bar Chart -->
        <div class="chart-box">
            <h3>Winners Over Time</h3>
            <div class="filter-controls">
                <label for="type-select">Type:</label>
                <select id="type-select">
                    <option value="All">All</option>
                    <option value="Physics">Physics</option>
                    <option value="Peace">Peace</option>
                    <option value="Chemistry">Chemistry</option>
                    <option value="Literature">Literature</option>
                </select>

                <label for="country-select">Country:</label>
                <select id="country-select">
                    <option value="All">All</option>
                    <option value="map" disabled>(Selected from map)</option>
                    <option value="United States">United States</option>
                    <option value="Germany">Germany</option>
                    <option value="France">France</option>
                </select>
            </div>
            <div id="barchartdiv"></div>
        </div>

        <!-- Pie Chart -->
        <div class="chart-box">
            <h3>Category Distribution</h3>
            <div class="filter-controls">
                <label for="country-pie-select">Country:</label>
                <select id="country-pie-select">
                    <option value="All">All</option>
                    <option value="map" disabled>(Selected from map)</option>
                    <option value="United States">United States</option>
                    <option value="Germany">Germany</option>
                    <option value="France">France</option>
                </select>
            </div>
            <div id="piechartdiv" style="height: 400px; width: 100%;"></div>
        </div>
    </div>


    <script src="src/chart_controller.js"></script>
    <script src="src/bar_chart.js"></script>
    <script src="src/pie_chart.js"></script>


    <h2>Nobel Prize Trends Over Time</h2>
    <p>
        Explore the evolution of Nobel Prize awards across different categories from 1900 to 2024. 
        This interactive time series visualization shows how the distribution of prizes has changed over more than a century.
    </p>

    <!-- Time Series Filter Controls -->
    <div class="timeseries-controls">
        <h3>Filter by Category</h3>
        <div class="timeseries-filter">
            <label><input type="checkbox" value="total" checked> Total</label>
            <label><input type="checkbox" value="physics" checked> Physics</label>
            <label><input type="checkbox" value="chemistry" checked> Chemistry</label>
            <label><input type="checkbox" value="medicine" checked> Medicine</label>
            <label><input type="checkbox" value="literature" checked> Literature</label>
            <label><input type="checkbox" value="peace" checked> Peace</label>
            <label><input type="checkbox" value="economics" checked> Economics</label>
        </div>
    </div>

    <!-- Time Series Chart Container -->
    <div id="timeserieschartdiv" style="width: 100%; height: 500px; margin: 20px 0;"></div>

    <h2>Age Analysis</h2>
    <p>
        Explore the age distribution of Nobel Prize winners. Each dot represents a winner - 
        hover to see detailed information or click for more details. Blue dots are male winners, pink dots are female winners.
        The dashed line shows the average age for the selected category.
    </p>

    <!-- Age Filter Controls -->
    <div class="timeseries-controls">
        <h3>Filter by Category</h3>
        <div class="age-filter">
            <label><input type="radio" name="age-category" value="physics" checked> Physics</label>
            <label><input type="radio" name="age-category" value="chemistry"> Chemistry</label>
            <label><input type="radio" name="age-category" value="medicine"> Medicine</label>
            <label><input type="radio" name="age-category" value="literature"> Literature</label>
            <label><input type="radio" name="age-category" value="peace"> Peace</label>
            <label><input type="radio" name="age-category" value="economics"> Economics</label>
        </div>
    </div>

    <!-- Age Chart Container -->
    <div id="agechartdiv" style="width: 100%; height: 600px; margin: 20px 0;"></div>

    <h2>Birth vs Organization Country Flow</h2>
    <p>
        The Sankey diagram below shows where Nobel laureates were born and where the organization they worked for is located when receiving the prize.  The thickness of each flow represents the number of laureates following that path.
    </p>
    
    <!-- Flow Chart Column Headers -->
    <div class="flow-headers" style="display: flex; justify-content: space-between; margin: 10px 50px; font-weight: bold; font-size: 16px; color: #666;">
        <div style="flex: 1; text-align: left;">Place of Birth</div>
        <div style="flex: 1; text-align: right;">Place of Residence</div>
    </div>
    
    <div id="flowchartdiv" style="width: 100%; height: 750px; margin: 0 0 20px 0;"></div>

    <script src="src/timeseries_chart.js"></script>
    <script src="src/country_analysis.js"></script>
    <script src="src/age_analysis.js"></script>
    <script src="src/flow_birth_org.js"></script>
    <script>
        // Initialize all charts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initTimeSeriesChart();
            initAgeChart();
            initBirthOrgFlowChart();
            
            // Add event listeners for filter checkboxes
            const timeseriesCheckboxes = document.querySelectorAll('.timeseries-filter input[type="checkbox"]');
            timeseriesCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateTimeSeriesFilter);
            });
            
            // Add event listeners for age filter radio buttons
            const ageRadios = document.querySelectorAll('input[name="age-category"]');
            ageRadios.forEach(radio => {
                radio.addEventListener('change', updateAgeFilter);
            });
        });
    </script>
</body>

</html>
body {
    background-color: #f4f4f4; /* Consistent page background */
    font-family: Arial, sans-serif;
    margin: 0; /* Reset default margin */
}

/* --- Optional Site Title Header --- */
.site-title-header {
    background-color: #fff;
    padding: 15px 30px;
    text-align: center;
    border-bottom: 1px solid #ddd;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.site-title-header h1 {
    margin: 0;
    color: #2c3e50;
    font-size: 2em;
}
.site-title-header p {
    margin: 5px 0 0;
    color: #555;
    font-size: 1em;
}

/* --- Top Navigation Bar Styling (from previous step) --- */
header nav.top-nav {
    background-color: #333;
    color: white;
    padding: 0;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
}

header nav.top-nav ul {
    list-style-type: none;
    margin: 0 auto;
    padding: 0;
    display: flex;
    justify-content: center;
}

header nav.top-nav ul li a.nav-link {
    color: white;
    text-decoration: none;
    padding: 16px 25px;
    display: block;
    text-align: center;
    font-size: 1em;
    font-weight: 500;
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

header nav.top-nav ul li a.nav-link:hover {
    background-color: #555;
    color: #fff;
}

header nav.top-nav ul li a.nav-link.active {
    background-color: #007bff;
    color: white;
    font-weight: bold;
}

/* --- Page Section Control (from previous step) --- */
.page-section {
    padding: 10px 15px 20px;
}

/* --- Individual Content Section Styling (from previous step) --- */
.content-section {
    background-color: #ffffff;
    padding: 20px 25px;
    margin: 25px auto;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    border: 1px solid #e0e0e0;
    max-width: 95%;
}

.content-section > h1,
.content-section > h2 {
    margin-top: 0;
    margin-bottom: 20px;
    padding-bottom: 12px;
    border-bottom: 2px solid #eeeeee;
    color: #2c3e50;
    font-size: 1.6em;
}
.content-section > h2 {
    font-size: 1.4em;
}

.content-section p {
    color: #555;
    line-height: 1.6;
    margin-bottom: 15px;
}

/* === Layout Change for World Map Section === */
.main-content-area {
    display: flex;
    flex-direction: column; /* Stack map-column and charts-column vertically */
    align-items: center;    /* Center columns if they have max-width */
    gap: 20px;
    width: 100%;
    margin-top: 20px;
}

.map-column {
    width: 100%;
    max-width: 1200px;
    display: flex; /* Keep flex if you have other direct children to manage */
    flex-direction: column; /* Stack legend (if it were in flow) and map-div */
    align-items: center;
    position: relative; /* This is crucial for absolute positioning of the legend */
}

.charts-column {
    width: 100%;
    max-width: 1000px; /* Max width for the statistics area */
    margin-left: auto;
    margin-right: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 30px; /* Space above this section */
}
/* ========================================== */

/* Chart Container Heights */
/* Specific height for the World Map */

/* Reduce height of individual stat charts slightly to fit better in 2x2 */
#barchartdiv,
#piechartdiv,
#genderpiechartdiv,
#awardAgeHistogramDiv {
    width: 100%;
    height: 280px; /* Adjusted height */
    border: none; 
    border-radius: 0; 
    padding: 0; 
}


/* Map Legend Styling */
#custom-map-legend {
    position: absolute; /* Take legend out of normal flow */
    top: 20px;          /* Distance from the top of .map-column */
    right: 20px;         /* Distance from the right of .map-column */
    z-index: 1001;      /* Ensure it's above the map, but below modals/nav if needed */

    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 15px;
    border-radius: 5px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); /* Slightly stronger shadow for overlay */
    font-family: sans-serif;
    font-size: 12px;
    width: fit-content; /* Keep it compact */
    /* Remove margin-bottom if it was for static positioning */
}

#custom-map-legend h4 {
    margin-top: 0;
    margin-bottom: 8px;
    text-align: center;
    font-size: 13px;
}

.legend-item {
    margin-bottom: 4px;
    display: flex;
    align-items: center;
}

.legend-item span {
    display: inline-block;
    width: 18px;
    height: 18px;
    margin-right: 8px;
    border: 1px solid #ccc;
}

/* Ensure the map itself takes up the space correctly */
#chartdiv {
    width: 100%;
    height: 600px; /* Or your desired map height */
    border-radius: 8px; /* Keep rounded corners if you like */
    border: 1px solid #ddd; /* Optional: border for the map div itself */
    /* Padding was 0, which is good for maps. Margin-bottom can be adjusted if needed. */
}

/* Controls Panel and Filters (Mostly from your existing styles, minor tweaks if needed) */
.control-panel.compact {
    display: flex;
    flex-wrap: wrap; /* Allow wrapping on smaller screens */
    gap: 20px; /* Reduced gap slightly */
    align-items: center; /* Align items vertically */
    padding: 15px;
    background: #f9f9f9; /* Slightly off-white */
    border-radius: 8px;
    margin-bottom: 20px;
    border: 1px solid #e0e0e0;
}

.timeline-container {
    flex: 1 1 300px; /* Allow timeline to grow but have a base size */
    min-width: 250px;
}

.category-filter {
    flex: 1 1 200px; /* Allow category filter to grow */
}

.slider-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
}

.slider {
    width: 100%;
}

#current-year {
    font-weight: bold;
    min-width: 40px;
    text-align: right;
}

.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-toggle {
    padding: 8px 15px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
    min-width: 150px; /* Ensure it's wide enough for "All Categories" */
    text-align: left;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.dropdown-toggle:hover {
    background: #f0f0f0;
}

.dropdown-menu {
    display: none;
    position: absolute;
    background: white;
    border: 1px solid #ddd;
    border-radius: 4px;
    min-width: 100%; /* Make menu at least as wide as toggle */
    z-index: 1001; /* Ensure above other elements like map legend */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    max-height: 250px; /* Limit height and allow scroll */
    overflow-y: auto;
}

.dropdown-menu.show { /* Style for when dropdown is shown via JS */
    display: block;
}

.dropdown-item {
    padding: 8px 15px;
    cursor: pointer;
    white-space: nowrap; /* Prevent text wrapping */
}

.dropdown-item:hover {
    background: #f0f0f0;
}

/* Styling for the .charts-column content */
.charts-column h2 {
    width: 100%;
    text-align: center;
    margin-bottom: 10px;
}
.charts-column h3#current-country-display { /* Specific an existing element */
    width: 100%;
    text-align: center;
    color: #555;
    margin-bottom:15px; /* Space below "Selected: ..." */
}

.chart-row {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: space-between; /* This will help create the 2x2 effect */
    gap: 20px; 
    width: 100%; /* Takes full width of its parent .charts-column */
}

.chart-box {
    width: calc(50% - 10px); /* (100% width - 20px gap) / 2 columns = 50% - 10px */
    min-width: 280px;        /* Minimum width for smaller screens before they stack */
    background-color: #fff;
    padding: 15px;
    border-radius: 6px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    border: 1px solid #e9e9e9;
    box-sizing: border-box; /* Ensures padding and border are included in width/height */
}

.chart-box h3 {
    text-align: center;
    font-size: 1em; /* Slightly smaller for chart titles */
    margin-top: 0;
    margin-bottom: 10px;
    color: #333;
}

.filter-controls {
    display: flex;
    gap: 10px;
    align-items: center;
    margin-bottom: 10px;
    flex-wrap: wrap;
    justify-content: center; /* Center filter controls within chart-box */
}

.filter-controls label {
    font-weight: normal; /* Less emphasis */
    font-size: 0.9em;
}

.filter-controls select {
    padding: 5px 8px;
    border-radius: 4px;
    border: 1px solid #ccc;
    font-size: 0.9em;
}

/* Styles for Analysis Page Sections (nobel-trends, age-analysis, etc.) */
/* These already use .content-section, so they inherit that styling. */
/* Specific styles for controls within analysis sections */
.timeseries-controls {
    background: #f9f9f9;
    padding: 15px;
    border-radius: 8px;
    margin: 20px 0;
    border: 1px solid #e0e0e0;
}

.timeseries-controls h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
    color: #333;
}

.timeseries-filter,
.age-filter, /* Ensure .age-filter inherits/has similar styles */
.interactive-gender-filter { /* Added for consistency */
    display: flex;
    flex-wrap: wrap;
    gap: 10px; /* Consistent gap */
    align-items: center;
}

.timeseries-filter label,
.age-filter label,
.interactive-gender-filter label {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 14px;
    color: #555;
    cursor: pointer;
    padding: 5px 10px;
    border-radius: 4px;
    transition: background-color 0.2s;
    background-color: #fff; /* Add a slight background to labels */
    border: 1px solid #ddd;
}

.timeseries-filter label:hover,
.age-filter label:hover,
.interactive-gender-filter label:hover {
    background-color: #e8e8e8;
}

.timeseries-filter input[type="checkbox"],
.age-filter input[type="radio"],
.interactive-gender-filter input[type="checkbox"] {
    margin-right: 5px; /* Space between control and text */
    cursor: pointer;
}

/* Chart divs within analysis sections */
#timeserieschartdiv,
#agechartdiv,
#flowchartdiv {
    background: white;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    /* width and height are set inline or by JS, but ensure container allows it */
}

/* Modal Styles (copied from your existing style.css, ensure they are complete) */
.modal {
    display: none;
    position: fixed;
    z-index: 1000; /* Ensure modals are above sticky nav */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.5);
    animation: fadeIn 0.3s;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.modal-content {
    background-color: #fefefe;
    margin: 5% auto;
    padding: 0;
    border: none;
    border-radius: 8px;
    width: 90%;
    max-width: 1000px;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    animation: slideIn 0.3s;
}

@keyframes slideIn {
    from { transform: translateY(-50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 25px;
    background: #f8f9fa;
    border-bottom: 1px solid #e0e0e0;
    border-radius: 8px 8px 0 0;
}

.modal-header h2 {
    margin: 0;
    color: #333;
    font-size: 24px;
}

.close-modal,
.close-age-modal, /* Ensure all your modal close buttons are styled */
.close-gender-modal,
.close-winner-detail-modal {
    color: #aaa;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.2s;
}

.close-modal:hover,
.close-age-modal:hover,
.close-gender-modal:hover,
.close-winner-detail-modal:hover {
    color: #333;
}

.modal-body {
    padding: 25px;
}

/* ... (rest of your modal and other specific styles from style.css) ... */
/* Ensure all relevant parts of your original style.css are included or adapted */

.winner-detail-summary, .country-summary, .age-summary, .gender-summary {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 6px;
    margin-bottom: 20px;
}
.detail-row { margin-bottom: 8px; font-size: 14px; }
.detail-row strong { color: #333; margin-right: 8px; }
.motivation-section { margin-top: 20px; }
.motivation-section h3 { margin: 0 0 10px 0; color: #333; font-size: 18px; }
.motivation-text { font-size: 14px; line-height: 1.5; color: #495057; background: #f8f9fa; padding: 15px; border-radius: 6px; border-left: 4px solid #2E86AB; }

.category-breakdown { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; }
.category-item { background: #e9ecef; padding: 4px 8px; border-radius: 4px; font-size: 12px; color: #495057; }
.winners-list h3 { margin: 0 0 15px 0; color: #333; }
.winners-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }
.winner-card { background: white; border: 1px solid #e0e0e0; border-radius: 6px; padding: 15px; transition: box-shadow 0.2s; }
.winner-card:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.winner-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
.winner-header h4 { margin: 0; color: #2E86AB; font-size: 16px; line-height: 1.2; }
.winner-year { background: #2E86AB; color: white; padding: 2px 6px; border-radius: 3px; font-size: 12px; font-weight: bold; }
.winner-category, .winner-age { color: #6c757d; font-weight: bold; font-size: 14px; margin-bottom: 5px; }
.winner-motivation { font-size: 13px; line-height: 1.4; color: #495057; margin-bottom: 8px; }
.winner-org, .winner-country { font-size: 12px; color: #6c757d; font-style: italic; }


/* Responsive design for modals */
@media (max-width: 768px) {
    .modal-content { width: 95%; margin: 2% auto; max-height: 95vh; }
    .winners-grid { grid-template-columns: 1fr; }
    .modal-header { padding: 15px 20px; }
    .modal-header h2 { font-size: 20px; }
    .modal-body { padding: 20px; }

    .map-column, .charts-column {
        width: 100%; /* Ensure full width on smaller screens */
    }
    .chart-box {
        width: 100%; /* Stack chart boxes on smaller screens */
    }
    .control-panel.compact {
        flex-direction: column; /* Stack controls on smaller screens */
        align-items: stretch;
    }
    .timeline-container, .category-filter {
        width: 100%; /* Full width for controls on mobile */
        flex: 1 1 auto;
    }
}

/* --- Dynamic Click Notification (Toast) --- */
.click-toast-notification {
    position: absolute; /* Positioned dynamically by JavaScript relative to the document */
    transform: translate(-50%, -120%); /* Start above the click point, centered horizontally */
    background-color: rgba(40, 40, 40, 0.85);
    color: white;
    padding: 8px 15px;
    border-radius: 20px; /* Pill shape */
    font-size: 0.9em;
    font-weight: 500;
    z-index: 20000;       /* Very high z-index to be on top of everything */
    opacity: 0;
    transition: opacity 0.3s ease-out, transform 0.3s ease-out;
    pointer-events: none; /* Prevents interfering with other map interactions */
    white-space: nowrap;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

.click-toast-notification.show {
    opacity: 1;
    transform: translate(-50%, -150%); /* Move up slightly more when fully visible */
}

/* Footer Styling */
footer { /* Copied from your existing styles */
    background-color: #16d7ad;
    color: white;
    text-align: center;
    padding: 10px 0;
    /* position: fixed; /* Consider if you want a fixed footer */
    bottom: 0;
    width: 100%;
    font-size: 14px;
    margin-top: 30px; /* Space above footer */
}